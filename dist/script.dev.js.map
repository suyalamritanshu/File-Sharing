{"version":3,"sources":["script.js"],"names":["File","require","fs","connectDB","deleteData","pastDate","Date","now","find","createdAt","$lt","files","length","file","unlinkSync","path","remove","console","log","filename","then","process","exit"],"mappings":";;AAAA,IAAMA,IAAI,GAAGC,OAAO,CAAC,eAAD,CAApB;;AACA,IAAMC,EAAE,GAAGD,OAAO,CAAC,IAAD,CAAlB;;AACA,IAAME,SAAS,GAAGF,OAAO,CAAC,aAAD,CAAzB;;AAEAE,SAAS;;AAET,SAAeC,UAAf;AAAA;;AAAA;AAAA;AAAA;AAAA;AACUC,UAAAA,QADV,GACqB,IAAIC,IAAJ,CAASA,IAAI,CAACC,GAAL,KAAa,KAAK,EAAL,GAAU,EAAV,GAAe,IAArC,CADrB;AAAA;AAAA,0CAEwBP,IAAI,CAACQ,IAAL,CAAU;AAAEC,YAAAA,SAAS,EAAE;AAACC,cAAAA,GAAG,EAAEL;AAAN;AAAb,WAAV,CAFxB;;AAAA;AAEUM,UAAAA,KAFV;;AAAA,eAIOA,KAAK,CAACC,MAJb;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,sBAK0BD,KAL1B;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAKkBE,UAAAA,IALlB;AAAA;AAOYX,UAAAA,EAAE,CAACY,UAAH,CAAcD,IAAI,CAACE,IAAnB;AAPZ;AAAA,0CAQkBF,IAAI,CAACG,MAAL,EARlB;;AAAA;AASYC,UAAAA,OAAO,CAACC,GAAR,iCAAqCL,IAAI,CAACM,QAA1C;AATZ;AAAA;;AAAA;AAAA;AAAA;AAWYF,UAAAA,OAAO,CAACC,GAAR;;AAXZ;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAgBQD,UAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;;AAhBR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAoBAd,UAAU,GAAGgB,IAAb,CAAkBC,OAAO,CAACC,IAA1B","sourcesContent":["const File = require('./models/file');\r\nconst fs = require('fs');\r\nconst connectDB = require('./config/db');\r\n\r\nconnectDB();\r\n\r\nasync function deleteData(){\r\n    const pastDate = new Date(Date.now() - 24 * 60 * 60 * 1000);\r\n    const files = await File.find({ createdAt: {$lt: pastDate } });\r\n\r\n    if(files.length){\r\n        for(const file of files){\r\n          try {\r\n            fs.unlinkSync(file.path);\r\n            await file.remove();\r\n            console.log(`successfully deleted. ${file.filename}`);\r\n          } catch (err) {\r\n            console.log(`Error while deleting file. ${err}`);\r\n\r\n          }\r\n        }\r\n\r\n        console.log('Job done!');\r\n    }\r\n}\r\n\r\ndeleteData().then(process.exit);"],"file":"script.dev.js"}