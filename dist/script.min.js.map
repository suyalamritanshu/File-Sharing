{"version":3,"sources":["script.js"],"names":["File","require","fs","deleteData","pastDate","files","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","file","regeneratorRuntime","async","_context","prev","next","Date","now","awrap","find","createdAt","$lt","sent","undefined","Symbol","iterator","done","value","unlinkSync","path","remove","console","log","concat","filename","t0","t1","finish","stop","connectDB","process","exit"],"mappings":"aAAA,IAAMA,KAAOC,QAAQ,iBACfC,GAAKD,QAAQ,MADbD,UAAcC,QAAC,eAErB,SAAeE,aAAf,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAKUZ,EAAW,IAAIa,KAAKA,KAAKC,MAAQ,OAL3CJ,EAAAE,KAAA,EAAAJ,mBAAAO,MAESnB,KAAAoB,KAAA,CAAAC,UAAA,CAAAC,IAAAlB,MAFT,KAAA,EAAA,KAESC,EAFTS,EAAAS,MAIepB,OAJf,CAAAW,EAAAE,KAAA,GAAA,MAAAT,IAAAD,GAAA,GAAAE,OAAAgB,EAAAV,EAAAC,KAAA,EAAAN,EAIAJ,EAJAoB,OAAAC,YAAA,KAAA,GAAA,GAAApB,GAAAI,EAAAD,EAAAO,QAAAW,KAAA,CAAAb,EAAAE,KAAA,GAAA,MAAA,OAIAL,EAJAD,EAAAkB,MAAAd,EAAAC,KAAA,GAIAb,GAAA2B,WAAAlB,EAAAmB,MAJAhB,EAAAE,KAAA,GAAAJ,mBAAAO,MAIAR,EAAAoB,UAJA,KAAA,GAIAC,QAAAC,IAAA,yBAAAC,OAAAvB,EAAAwB,WAJArB,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAAF,EAAAC,KAAA,GAAAD,EAAAsB,GAAAtB,EAAA,MAAA,IAKUV,QADV6B,IACU7B,8BAAAA,OAAAA,EAAAA,KALV,KAAA,GAAAE,GAAA,EAAAQ,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAAF,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAAF,EAAAC,KAAA,GAAAD,EAAAuB,GAAAvB,EAAA,MAAA,GAAAP,GAAA,EAAAC,EAAAM,EAAAuB,GAAA,KAAA,GAAAvB,EAAAC,KAAA,GAAAD,EAAAC,KAAA,GAAAT,GAAA,MAAAG,EAAA,QAAAA,EAAA,SAAA,KAAA,GAAA,GAAAK,EAAAC,KAAA,GAAAR,EAAA,MAAAC,EAAAM,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAA,OAAAF,EAAAwB,OAAA,IAAA,KAAA,GAAA,OAAAxB,EAAAwB,OAAA,IAAA,KAAA,GAM+CN,QAAAC,IAAA,aAN/C,KAAA,GAAA,IAAA,MAAA,OAAAnB,EAAAyB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,GAAA,GAAA,IAAA,CAAA,GAAA,IAAA,CAAA,GAAA,CAAA,GAAA,MADAC,YAOUnC,aAAAA,KAFVoC,QAAAC","file":"script.min.js","sourcesContent":["const File = require('./models/file');\r\nconst fs = require('fs');\r\nconst connectDB = require('./config/db');\r\n\r\nconnectDB();\r\n\r\nasync function deleteData(){\r\n    const pastDate = new Date(Date.now() - 24 * 60 * 60 * 1000);\r\n    const files = await File.find({ createdAt: {$lt: pastDate } });\r\n\r\n    if(files.length){\r\n        for(const file of files){\r\n          try {\r\n            fs.unlinkSync(file.path);\r\n            await file.remove();\r\n            console.log(`successfully deleted. ${file.filename}`);\r\n          } catch (err) {\r\n            console.log(`Error while deleting file. ${err}`);\r\n\r\n          }\r\n        }\r\n\r\n        console.log('Job done!');\r\n    }\r\n}\r\n\r\ndeleteData().then(process.exit);"]}