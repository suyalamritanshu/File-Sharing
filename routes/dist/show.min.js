"use strict";var router=require("express").Router(),File=require("../models/file");router.get("/:uuid",function(r,n){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(File.findOne({uuid:r.params.uuid}));case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",n.render("download",{error:"Link has expired."}));case 6:return e.abrupt("return",n.render("download",{uuid:t.uuid,fileName:t.filename,fileSize:t.size,downloadLink:"".concat(process.env.APP_BASE_URL,"/files/download/").concat(t.uuid)}));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",n.render("download",{error:"Something went wrong."}));case 12:case"end":return e.stop()}},null,null,[[0,9]])}),module.exports=router;
//# sourceMappingURL=show.min.js.map
