{"version":3,"sources":["show.js"],"names":["router","require","Router","File","get","req","res","file","regeneratorRuntime","async","_context","prev","next","awrap","findOne","uuid","params","sent","abrupt","render","error","fileName","filename","fileSize","size","downloadLink","concat","process","env","APP_BASE_URL","t0","stop"],"mappings":"aAAA,IAAMA,OAASC,QAAQ,WAAWC,SAC5BC,KAAOF,QAAQ,kBAErBD,OAAOI,IAAI,SAAU,SAAMC,EAAKC,GAAX,IAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAAAJ,mBAAAK,MAAAV,KAAAW,QAAMT,CAANU,KAAAV,EAAAW,OAAAD,QAAA,KAAA,EAAA,GAAVR,EAAUG,EAAAO,KAAA,CAAAP,EAAAE,KAAA,EAAA,MAAA,OAAAF,EAAAQ,OAAA,SAAAZ,EAAAa,OAAA,WAAA,CAAAC,MAAA,uBAAA,KAAA,EAAA,OAAAV,EAAAQ,OAAA,SAAAZ,EAAAa,OAAA,WAAA,CAGqBJ,KAAMV,EAAIW,KAH/BK,SAAAd,EAAAe,SAcTC,SAAUhB,EAAKiB,KAdNC,aAAA,GAAAC,OAAAC,QAAAC,IAAAC,aAAA,oBAAAH,OAAAnB,EAAAQ,SAAA,KAAA,EAAA,OAAAL,EAAAC,KAAA,EAAAD,EAAAoB,GAAApB,EAAA,MAAA,GAAAA,EAAAQ,OAAA,SAAAZ,EAAAa,OAAA,WAAA,CAAAC,MAAA,2BAAA,KAAA,GAAA,IAAA,MAAA,OAAAV,EAAAqB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,OAMsBX,OAAAA,QAAKpB","file":"show.min.js","sourcesContent":["const router = require('express').Router();\r\nconst File = require('../models/file');\r\n\r\nrouter.get('/:uuid', async(req, res) => {\r\n\r\n    try {\r\n        const file = await File.findOne({ uuid: req.params.uuid });\r\n\r\n        if(!file){\r\n            return res.render('download', {error: 'Link has expired.'});\r\n        }\r\n\r\n        //fetching data from db\r\n\r\n        return res.render('download', { \r\n            uuid: file.uuid, \r\n            fileName: file.filename, \r\n            fileSize: file.size, \r\n            downloadLink: `${process.env.APP_BASE_URL}/files/download/${file.uuid}` \r\n        \r\n        });\r\n    } catch(err) {\r\n        return res.render('download', { error: 'Something went wrong.'});\r\n    }\r\n});\r\n\r\n\r\nmodule.exports = router;\r\n\r\n  \r\n"]}