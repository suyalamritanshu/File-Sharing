{"version":3,"sources":["download.js"],"names":["router","require","Router","File","req","res","file","filePath","regeneratorRuntime","async","_context","prev","next","awrap","findOne","uuid","params","sent","abrupt","render","error","concat","__dirname","path","download","stop"],"mappings":"aAAA,IAAMA,OAAUC,QAAQ,WAAWC,SAC7BC,KAAOF,QAAQ,kBAArBD,OAAMG,IAAOF,SAAQ,SAAAG,EAAAC,GAAA,IAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAF,EAAAE,KAAA,EAAAJ,mBAAAK,MAIEV,KAAKW,QAAQ,CAACC,KAAMX,EAAIY,OAAOD,QAJjC,KAAA,EAAA,GAIXT,EAJWI,EAAAO,KAAA,CAAAP,EAAAE,KAAA,EAAA,MAAA,OAAAF,EAAAQ,OAAA,SAGAb,EAAAc,OAAA,WAAA,CAAAC,MAAA,4BAHA,KAAA,EAGAb,EAHA,GAAAc,OAGAC,UAHA,QAAAD,OAGAf,EAAAiB,MAAAlB,EAAAmB,SAAAjB,GAHA,KAAA,EAAA,IAAA,MAAA,OAAAG,EAAAe,YAIgBV,OAAAA,QAAIf","file":"download.min.js","sourcesContent":["const router =  require('express').Router();\r\nconst File = require('../models/file');\r\n\r\n\r\nrouter.get('/:uuid', async (req, res) => {\r\n    const file = await File.findOne({uuid: req.params.uuid});\r\n    if(!file){\r\n        return res.render('download', { error: 'Link has been expired.'});\r\n    }\r\n\r\n   const filePath  = `${__dirname}/../${file.path}`;\r\n   res.download(filePath);\r\n});\r\n\r\nmodule.exports = router;"]}