{"version":3,"sources":["show.js"],"names":["router","require","Router","File","get","req","res","findOne","uuid","params","file","render","error","fileName","filename","fileSize","size","downloadLink","process","env","APP_BASE_URL","module","exports"],"mappings":";;AAAA,IAAMA,MAAM,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBC,MAAnB,EAAf;;AACA,IAAMC,IAAI,GAAGF,OAAO,CAAC,gBAAD,CAApB;;AAEAD,MAAM,CAACI,GAAP,CAAW,QAAX,EAAqB,iBAAMC,GAAN,EAAWC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAGMH,IAAI,CAACI,OAAL,CAAa;AAAEC,YAAAA,IAAI,EAAEH,GAAG,CAACI,MAAJ,CAAWD;AAAnB,WAAb,CAHN;;AAAA;AAGPE,UAAAA,IAHO;;AAAA,cAKTA,IALS;AAAA;AAAA;AAAA;;AAAA,2CAMFJ,GAAG,CAACK,MAAJ,CAAW,UAAX,EAAuB;AAACC,YAAAA,KAAK,EAAE;AAAR,WAAvB,CANE;;AAAA;AAAA,2CAWNN,GAAG,CAACK,MAAJ,CAAW,UAAX,EAAuB;AAC1BH,YAAAA,IAAI,EAAEE,IAAI,CAACF,IADe;AAE1BK,YAAAA,QAAQ,EAAEH,IAAI,CAACI,QAFW;AAG1BC,YAAAA,QAAQ,EAAEL,IAAI,CAACM,IAHW;AAI1BC,YAAAA,YAAY,YAAKC,OAAO,CAACC,GAAR,CAAYC,YAAjB,6BAAgDV,IAAI,CAACF,IAArD;AAJc,WAAvB,CAXM;;AAAA;AAAA;AAAA;AAAA,2CAmBNF,GAAG,CAACK,MAAJ,CAAW,UAAX,EAAuB;AAAEC,YAAAA,KAAK,EAAE;AAAT,WAAvB,CAnBM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAArB;AAwBAS,MAAM,CAACC,OAAP,GAAiBtB,MAAjB","sourcesContent":["const router = require('express').Router();\r\nconst File = require('../models/file');\r\n\r\nrouter.get('/:uuid', async(req, res) => {\r\n\r\n    try {\r\n        const file = await File.findOne({ uuid: req.params.uuid });\r\n\r\n        if(!file){\r\n            return res.render('download', {error: 'Link has expired.'});\r\n        }\r\n\r\n        //fetching data from db\r\n\r\n        return res.render('download', { \r\n            uuid: file.uuid, \r\n            fileName: file.filename, \r\n            fileSize: file.size, \r\n            downloadLink: `${process.env.APP_BASE_URL}/files/download/${file.uuid}` \r\n        \r\n        });\r\n    } catch(err) {\r\n        return res.render('download', { error: 'Something went wrong.'});\r\n    }\r\n});\r\n\r\n\r\nmodule.exports = router;\r\n\r\n  \r\n"],"file":"show.dev.js"}