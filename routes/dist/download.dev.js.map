{"version":3,"sources":["download.js"],"names":["router","require","Router","File","get","req","res","findOne","uuid","params","file","render","error","filePath","__dirname","path","download","module","exports"],"mappings":";;AAAA,IAAMA,MAAM,GAAIC,OAAO,CAAC,SAAD,CAAP,CAAmBC,MAAnB,EAAhB;;AACA,IAAMC,IAAI,GAAGF,OAAO,CAAC,gBAAD,CAApB;;AAGAD,MAAM,CAACI,GAAP,CAAW,QAAX,EAAqB,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CACEH,IAAI,CAACI,OAAL,CAAa;AAACC,YAAAA,IAAI,EAAEH,GAAG,CAACI,MAAJ,CAAWD;AAAlB,WAAb,CADF;;AAAA;AACXE,UAAAA,IADW;;AAAA,cAEbA,IAFa;AAAA;AAAA;AAAA;;AAAA,2CAGNJ,GAAG,CAACK,MAAJ,CAAW,UAAX,EAAuB;AAAEC,YAAAA,KAAK,EAAE;AAAT,WAAvB,CAHM;;AAAA;AAMZC,UAAAA,QANY,aAMGC,SANH,iBAMmBJ,IAAI,CAACK,IANxB;AAOlBT,UAAAA,GAAG,CAACU,QAAJ,CAAaH,QAAb;;AAPkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAArB;AAUAI,MAAM,CAACC,OAAP,GAAiBlB,MAAjB","sourcesContent":["const router =  require('express').Router();\r\nconst File = require('../models/file');\r\n\r\n\r\nrouter.get('/:uuid', async (req, res) => {\r\n    const file = await File.findOne({uuid: req.params.uuid});\r\n    if(!file){\r\n        return res.render('download', { error: 'Link has been expired.'});\r\n    }\r\n\r\n   const filePath  = `${__dirname}/../${file.path}`;\r\n   res.download(filePath);\r\n});\r\n\r\nmodule.exports = router;"],"file":"download.dev.js"}